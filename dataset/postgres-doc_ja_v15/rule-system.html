<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>52.4. PostgreSQLルールシステム</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="prev" href="parser-stage.html" title="52.3. 構文解析過程" /><link rel="next" href="planner-optimizer.html" title="52.5. プランナ/オプティマイザ" /><meta name="viewport" content="width=device-width,initial-scale=1.0" /><style type="text/css"><!--
h1.TITLE {clear:both;}
.versions {
  float:right;
  margin-top:-0.2em;
  margin-bottom:0.5em;
  width: auto;
  padding:0.4em 1em;
  border:solid 1px #e0e0e0;
  border-radius:0.5em;
  background:#f3f3f3;
  background-image:-webkit-linear-gradient(#fbfbfb, #ebebeb);
  background-image:-moz-linear-gradient(#fbfbfb, #ebebeb);
  background-image:-o-linear-gradient(#fbfbfb, #ebebeb);
  background-image:linear-gradient(#fbfbfb, #ebebeb);
  box-shadow:0 3px 8px -3px #000;
}
.versions .label {
  cursor:pointer;
}
.versions .label:hover {
  text-decoration:underline;
}
.versions .list {
  display:none;
}
.versions .list-toggle {
  display:inline;
}
.versions .me {
  padding:0 0.2em;
  border:solid 2px #e88;
  border-radius:0.3em;
  background:#fbfbfb;
  font-weight:bold;
}
.versions .other {
  font-weight:bold;
}
.versions .unsup {
  color:#aaa;
}
.versions .unsup a {
  color:#aaa;
}

@media print {
  a {
    color: inherit;
    text-decoration: none;
  }
  a:visited {
    color: inherit;
  }
  .NAVHEADER, .versions, .NAVFOOTER {
    display: none;
  }
}
--></style><script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript"><!--
  $(function(){
      $(".versions .label").bind("click", function(){
          $(".versions .list").toggleClass("list-toggle");
      })
  });
--></script></head><body id="docContent" class="container-fluid col-10"><div class="versions"><span class="label">他のバージョンの文書</span> <span class="list">： <span class="me">15</span> | <span class="other"><a href="/document/14/html/rule-system.html">14</a><span> | <span class="other"><a href="/document/13/html/rule-system.html">13</a><span> | <span class="other"><a href="/document/12/html/rule-system.html">12</a><span> | <span class="other"><a href="/document/11/html/rule-system.html">11</a><span> | <span class="other"><a href="/document/10/html/rule-system.html">10</a><span> | <span class="other"><a href="/document/9.6/html/rule-system.html">9.6</a><span> | <span class="other"><a href="/document/9.5/html/rule-system.html">9.5</a><span> | <span class="other"><a href="/document/9.4/html/rule-system.html">9.4</a><span> | <span class="other"><a href="/document/9.3/html/rule-system.html">9.3</a><span> | <span class="other"><a href="/document/9.2/html/rule-system.html">9.2</a><span> | <span class="other"><a href="/document/9.1/html/rule-system.html">9.1</a><span> | <span class="other"><a href="/document/9.0/html/rule-system.html">9.0</a><span> | <span class="other"><a href="/document/8.4/html/rule-system.html">8.4</a><span> | <span class="other"><a href="/document/8.3/html/rule-system.html">8.3</a><span> | <span class="other"><a href="/document/8.2/html/rule-system.html">8.2</a><span> | <span class="other"><a href="/document/8.1/html/rule-system.html">8.1</a><span> | <span class="other"><a href="/document/8.0/html/rule-system.html">8.0</a><span> | <span class="other"><a href="/document/7.4/html/rule-system.html">7.4</a><span> | <span class="other"><a href="/document/7.3/developer/rule-system.html">7.3</a></span> | <span class="other"><a href="/document/7.2/developer/rule-system.html">7.2</a></span></span></div><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="4" align="center"><a accesskey="h" href="index.html">PostgreSQL 15.4文書</a></th></tr><tr><td width="10%" align="left"></td><td width="10%" align="left"></td><td width="60%" align="center"><a href="overview.html" title="第52章 PostgreSQL内部の概要">第52章 PostgreSQL内部の概要</a></td><td width="20%" align="right"></td></tr><tr><td width="10%" align="left"><a accesskey="p" href="parser-stage.html" title="52.3. 構文解析過程">前へ</a> </td><td width="10%" align="left"><a accesskey="u" href="overview.html" title="第52章 PostgreSQL内部の概要">上へ</a></td><td width="60%" align="center">52.4. <span class="productname">PostgreSQL</span>ルールシステム</td><td width="20%" align="right"> <a accesskey="n" href="planner-optimizer.html" title="52.5. プランナ/オプティマイザ">次へ</a></td></tr></table><hr /></div><div class="sect1" id="RULE-SYSTEM"><div class="titlepage"><div><div><h2 class="title" style="clear: both">52.4. <span class="productname">PostgreSQL</span>ルールシステム</h2></div></div></div><!--
   <title>The <productname>PostgreSQL</productname> Rule System</title>
--><p>
<!--
    <productname>PostgreSQL</productname> supports a powerful
    <firstterm>rule system</firstterm> for the specification
    of <firstterm>views</firstterm> and ambiguous <firstterm>view updates</firstterm>.
    Originally the <productname>PostgreSQL</productname>
    rule system consisted of two implementations:
-->
<span class="productname">PostgreSQL</span>には、<em class="firstterm">ビュー</em>と理解の仕方でどうとも取れる<em class="firstterm">ビューの更新</em>の仕様に対応する強力な<em class="firstterm">ルールシステム</em>があります。
元々<span class="productname">PostgreSQL</span>のルールシステムは2つの実装で構成されていました。

    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
<!--
       The first one worked using <firstterm>row level</firstterm> processing and was
       implemented deep in the <firstterm>executor</firstterm>. The rule system was
       called whenever an individual row had been accessed. This
       implementation was removed in 1995 when the last official release
       of the <productname>Berkeley Postgres</productname> project was
       transformed into <productname>Postgres95</productname>.
-->
初めの1つは<em class="firstterm">行レベル</em>の処理を使って動き、<em class="firstterm">エグゼキュータ</em>の内部に深く実装されていました。
個別の行がアクセスされる度にルールシステムが呼ばれていました。
この実装は1995年、最後の<span class="productname">Berkeley Postgres</span>プロジェクトの公式リリースが<span class="productname">Postgres95</span>へ移行する時に削除されました。
      </p></li><li class="listitem"><p>
<!--
       The second implementation of the rule system is a technique
       called <firstterm>query rewriting</firstterm>.
       The <firstterm>rewrite system</firstterm> is a module
       that exists between the <firstterm>parser stage</firstterm> and the
       <firstterm>planner/optimizer</firstterm>. This technique is still implemented.
-->
ルールシステムの2つ目の実装は<em class="firstterm">問い合わせ書き換え</em>と呼ばれる手法です。
<em class="firstterm">書き換えシステム</em>は<em class="firstterm">構文解析過程</em>と<em class="firstterm">プランナ/オプティマイザ</em>の間にあるモジュールです。
この手法は現在でも実装されています。
      </p></li></ul></div><p>
   </p><p>
<!--
    The query rewriter is discussed in some detail in
    <xref linkend="rules"/>, so there is no need to cover it here.
    We will only point out that both the input and the output of the
    rewriter are query trees, that is, there is no change in the
    representation or level of semantic detail in the trees.  Rewriting
    can be thought of as a form of macro expansion.
-->
問い合わせの書き換えについては<a class="xref" href="rules.html" title="第41章 ルールシステム">第41章</a>にて詳しく論議されますので、ここでは取り扱いません。
書き換えの入出力はともに問い合わせツリーである、つまり、ツリー内の表現の仕方や語義をどの程度詳しく判断するかには変更はない、ということを指摘するのに留めます。
書き換えはマクロの拡張と捉えることもできます。
   </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="parser-stage.html" title="52.3. 構文解析過程">前へ</a> </td><td width="20%" align="center"><a accesskey="u" href="overview.html" title="第52章 PostgreSQL内部の概要">上へ</a></td><td width="40%" align="right"> <a accesskey="n" href="planner-optimizer.html" title="52.5. プランナ/オプティマイザ">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">52.3. 構文解析過程 </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 15.4文書">ホーム</a></td><td width="40%" align="right" valign="top"> 52.5. プランナ/オプティマイザ</td></tr></table></div></body></html>