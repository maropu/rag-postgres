<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>52.2. 接続の確立</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="prev" href="query-path.html" title="52.1. 問い合わせの経路" /><link rel="next" href="parser-stage.html" title="52.3. 構文解析過程" /><meta name="viewport" content="width=device-width,initial-scale=1.0" /><style type="text/css"><!--
h1.TITLE {clear:both;}
.versions {
  float:right;
  margin-top:-0.2em;
  margin-bottom:0.5em;
  width: auto;
  padding:0.4em 1em;
  border:solid 1px #e0e0e0;
  border-radius:0.5em;
  background:#f3f3f3;
  background-image:-webkit-linear-gradient(#fbfbfb, #ebebeb);
  background-image:-moz-linear-gradient(#fbfbfb, #ebebeb);
  background-image:-o-linear-gradient(#fbfbfb, #ebebeb);
  background-image:linear-gradient(#fbfbfb, #ebebeb);
  box-shadow:0 3px 8px -3px #000;
}
.versions .label {
  cursor:pointer;
}
.versions .label:hover {
  text-decoration:underline;
}
.versions .list {
  display:none;
}
.versions .list-toggle {
  display:inline;
}
.versions .me {
  padding:0 0.2em;
  border:solid 2px #e88;
  border-radius:0.3em;
  background:#fbfbfb;
  font-weight:bold;
}
.versions .other {
  font-weight:bold;
}
.versions .unsup {
  color:#aaa;
}
.versions .unsup a {
  color:#aaa;
}

@media print {
  a {
    color: inherit;
    text-decoration: none;
  }
  a:visited {
    color: inherit;
  }
  .NAVHEADER, .versions, .NAVFOOTER {
    display: none;
  }
}
--></style><script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript"><!--
  $(function(){
      $(".versions .label").bind("click", function(){
          $(".versions .list").toggleClass("list-toggle");
      })
  });
--></script></head><body id="docContent" class="container-fluid col-10"><div class="versions"><span class="label">他のバージョンの文書</span> <span class="list">： <span class="me">15</span> | <span class="other"><a href="/document/14/html/connect-estab.html">14</a><span> | <span class="other"><a href="/document/13/html/connect-estab.html">13</a><span> | <span class="other"><a href="/document/12/html/connect-estab.html">12</a><span> | <span class="other"><a href="/document/11/html/connect-estab.html">11</a><span> | <span class="other"><a href="/document/10/html/connect-estab.html">10</a><span> | <span class="other"><a href="/document/9.6/html/connect-estab.html">9.6</a><span> | <span class="other"><a href="/document/9.5/html/connect-estab.html">9.5</a><span> | <span class="other"><a href="/document/9.4/html/connect-estab.html">9.4</a><span> | <span class="other"><a href="/document/9.3/html/connect-estab.html">9.3</a><span> | <span class="other"><a href="/document/9.2/html/connect-estab.html">9.2</a><span> | <span class="other"><a href="/document/9.1/html/connect-estab.html">9.1</a><span> | <span class="other"><a href="/document/9.0/html/connect-estab.html">9.0</a><span> | <span class="other"><a href="/document/8.4/html/connect-estab.html">8.4</a><span> | <span class="other"><a href="/document/8.3/html/connect-estab.html">8.3</a><span> | <span class="other"><a href="/document/8.2/html/connect-estab.html">8.2</a><span> | <span class="other"><a href="/document/8.1/html/connect-estab.html">8.1</a><span> | <span class="other"><a href="/document/8.0/html/connect-estab.html">8.0</a><span> | <span class="other"><a href="/document/7.4/html/connect-estab.html">7.4</a><span> | <span class="other"><a href="/document/7.3/developer/connect-estab.html">7.3</a></span> | <span class="other"><a href="/document/7.2/developer/connect-estab.html">7.2</a></span></span></div><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="4" align="center"><a accesskey="h" href="index.html">PostgreSQL 15.4文書</a></th></tr><tr><td width="10%" align="left"></td><td width="10%" align="left"></td><td width="60%" align="center"><a href="overview.html" title="第52章 PostgreSQL内部の概要">第52章 PostgreSQL内部の概要</a></td><td width="20%" align="right"></td></tr><tr><td width="10%" align="left"><a accesskey="p" href="query-path.html" title="52.1. 問い合わせの経路">前へ</a> </td><td width="10%" align="left"><a accesskey="u" href="overview.html" title="第52章 PostgreSQL内部の概要">上へ</a></td><td width="60%" align="center">52.2. 接続の確立</td><td width="20%" align="right"> <a accesskey="n" href="parser-stage.html" title="52.3. 構文解析過程">次へ</a></td></tr></table><hr /></div><div class="sect1" id="CONNECT-ESTAB"><div class="titlepage"><div><div><h2 class="title" style="clear: both">52.2. 接続の確立</h2></div></div></div><!--
   <title>How Connections Are Established</title>
--><p>
<!--
    <productname>PostgreSQL</productname> implements a
    <quote>process per user</quote> client/server model.
    In this model, every
    <glossterm linkend="glossary-client">client process</glossterm>
    connects to exactly one
    <glossterm linkend="glossary-backend">backend process</glossterm>.
    As we do not know ahead of time how many connections will be made,
    we have to use a <quote>supervisor process</quote> that spawns a new
    backend process every time a connection is requested. This supervisor
    process is called
    <glossterm linkend="glossary-postmaster">postmaster</glossterm>
    and listens at a specified TCP/IP port for incoming connections.
    Whenever it detects a request for a connection, it spawns a new
    backend process.  Those backend processes communicate with each
    other and with other processes of the
    <glossterm linkend="glossary-instance">instance</glossterm>
    using <firstterm>semaphores</firstterm> and
    <glossterm linkend="glossary-shared-memory">shared memory</glossterm>
    to ensure data integrity throughout concurrent data access.
-->
<span class="productname">PostgreSQL</span>は<span class="quote">「<span class="quote">1プロセスに1ユーザ</span>」</span>のクライアント/サーバモデルを実装しています。
このモデルでは、各<a class="glossterm" href="glossary.html#GLOSSARY-CLIENT"><em class="glossterm">クライアントプロセス</em></a>は厳密に1つの<a class="glossterm" href="glossary.html#GLOSSARY-BACKEND"><em class="glossterm">バックエンドプロセス</em></a>に接続します。
いくつの接続が行われるか事前にわからないので、接続要求の度に新しいバックエンドプロセスを作る<span class="quote">「<span class="quote">スーパーバイザプロセス</span>」</span>を使わなければなりません。
このスーパーバイザプロセスは<a class="glossterm" href="glossary.html#GLOSSARY-POSTMASTER"><em class="glossterm">postmaster</em></a>と呼ばれ、指定されたTCP/IPポートで入ってくる接続要求を監視します。
接続要求を検出すると、新しいバックエンドプロセスを生み出します。
このバックエンドプロセスは<em class="firstterm">セマフォ</em>と<a class="glossterm" href="glossary.html#GLOSSARY-SHARED-MEMORY"><em class="glossterm">共有メモリ</em></a>を活用してお互いに連絡を取り合い、<a class="glossterm" href="glossary.html#GLOSSARY-INSTANCE"><em class="glossterm">instance</em></a>の他のプロセスと通信し、同時にデータにアクセスしても整合性が保たれるようにします。
   </p><p>
<!--
    The client process can be any program that understands the
    <productname>PostgreSQL</productname> protocol described in
    <xref linkend="protocol"/>.  Many clients are based on the
    C-language library <application>libpq</application>, but several independent
    implementations of the protocol exist, such as the Java
    <application>JDBC</application> driver.
-->
クライアントプロセスは<a class="xref" href="protocol.html" title="第55章 フロントエンド/バックエンドプロトコル">第55章</a>に記載された<span class="productname">PostgreSQL</span>プロトコルを理解できるどんなプログラムでも構いません。
多くのクライアントは<span class="application">libpq</span> C言語ライブラリに基づいていますが、Java <span class="application">JDBC</span>ドライバのようにいくつかの独立したプロトコル実装も存在します。
   </p><p>
<!--
    Once a connection is established, the client process can send a query
    to the backend process it's connected to. The query is transmitted using
    plain text, i.e., there is no parsing done in the client. The backend
    process parses the query, creates an <firstterm>execution plan</firstterm>,
    executes the plan, and returns the retrieved rows to the client
    by transmitting them over the established connection.
-->
いったん接続が確立されると、クライアントプロセスは接続されたバックエンドプロセスに問い合わせを送ることができます。
問い合わせは平文で送信されます。
つまり、クライアントでは構文解析を行いません。
バックエンドプロセスは問い合わせの構文解析を行い、<em class="firstterm">実行計画</em>を作り、そして計画を実行し、抽出した行を確立された接続を通じてクライアントに返します。
   </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="query-path.html" title="52.1. 問い合わせの経路">前へ</a> </td><td width="20%" align="center"><a accesskey="u" href="overview.html" title="第52章 PostgreSQL内部の概要">上へ</a></td><td width="40%" align="right"> <a accesskey="n" href="parser-stage.html" title="52.3. 構文解析過程">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">52.1. 問い合わせの経路 </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 15.4文書">ホーム</a></td><td width="40%" align="right" valign="top"> 52.3. 構文解析過程</td></tr></table></div></body></html>