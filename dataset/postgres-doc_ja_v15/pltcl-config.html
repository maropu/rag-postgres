<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>44.11. PL/Tclの設定</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="prev" href="pltcl-transactions.html" title="44.10. トランザクション制御" /><link rel="next" href="pltcl-procnames.html" title="44.12. Tclプロシージャ名" /><meta name="viewport" content="width=device-width,initial-scale=1.0" /><style type="text/css"><!--
h1.TITLE {clear:both;}
.versions {
  float:right;
  margin-top:-0.2em;
  margin-bottom:0.5em;
  width: auto;
  padding:0.4em 1em;
  border:solid 1px #e0e0e0;
  border-radius:0.5em;
  background:#f3f3f3;
  background-image:-webkit-linear-gradient(#fbfbfb, #ebebeb);
  background-image:-moz-linear-gradient(#fbfbfb, #ebebeb);
  background-image:-o-linear-gradient(#fbfbfb, #ebebeb);
  background-image:linear-gradient(#fbfbfb, #ebebeb);
  box-shadow:0 3px 8px -3px #000;
}
.versions .label {
  cursor:pointer;
}
.versions .label:hover {
  text-decoration:underline;
}
.versions .list {
  display:none;
}
.versions .list-toggle {
  display:inline;
}
.versions .me {
  padding:0 0.2em;
  border:solid 2px #e88;
  border-radius:0.3em;
  background:#fbfbfb;
  font-weight:bold;
}
.versions .other {
  font-weight:bold;
}
.versions .unsup {
  color:#aaa;
}
.versions .unsup a {
  color:#aaa;
}

@media print {
  a {
    color: inherit;
    text-decoration: none;
  }
  a:visited {
    color: inherit;
  }
  .NAVHEADER, .versions, .NAVFOOTER {
    display: none;
  }
}
--></style><script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript"><!--
  $(function(){
      $(".versions .label").bind("click", function(){
          $(".versions .list").toggleClass("list-toggle");
      })
  });
--></script></head><body id="docContent" class="container-fluid col-10"><div class="versions"><span class="label">他のバージョンの文書</span> <span class="list">： <span class="me">15</span> | <span class="other"><a href="/document/14/html/pltcl-config.html">14</a><span> | <span class="other"><a href="/document/13/html/pltcl-config.html">13</a><span> | <span class="other"><a href="/document/12/html/pltcl-config.html">12</a><span> | <span class="other"><a href="/document/11/html/pltcl-config.html">11</a><span> | <span class="other"><a href="/document/10/html/pltcl-config.html">10</a><span> | <span class="unsup"><a href="/document/9.6/index.html">9.6</a></span> | <span class="unsup"><a href="/document/9.5/index.html">9.5</a></span> | <span class="unsup"><a href="/document/9.4/index.html">9.4</a></span> | <span class="unsup"><a href="/document/9.3/index.html">9.3</a></span> | <span class="unsup"><a href="/document/9.2/index.html">9.2</a></span> | <span class="unsup"><a href="/document/9.1/index.html">9.1</a></span> | <span class="unsup"><a href="/document/9.0/index.html">9.0</a></span> | <span class="unsup"><a href="/document/8.4/index.html">8.4</a></span> | <span class="unsup"><a href="/document/8.3/index.html">8.3</a></span> | <span class="unsup"><a href="/document/8.2/index.html">8.2</a></span> | <span class="unsup"><a href="/document/8.1/index.html">8.1</a></span> | <span class="unsup"><a href="/document/8.0/index.html">8.0</a></span> | <span class="unsup"><a href="/document/7.4/index.html">7.4</a></span> | <span class="unsup"><a href="/document/7.3/index.html">7.3</a></span> | <span class="unsup"><a href="/document/7.2/index.html">7.2</a></span></span></div><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="4" align="center"><a accesskey="h" href="index.html">PostgreSQL 15.4文書</a></th></tr><tr><td width="10%" align="left"></td><td width="10%" align="left"></td><td width="60%" align="center"><a href="pltcl.html" title="第44章 PL/Tcl — Tcl手続き言語">第44章 PL/Tcl — Tcl手続き言語</a></td><td width="20%" align="right"></td></tr><tr><td width="10%" align="left"><a accesskey="p" href="pltcl-transactions.html" title="44.10. トランザクション制御">前へ</a> </td><td width="10%" align="left"><a accesskey="u" href="pltcl.html" title="第44章 PL/Tcl — Tcl手続き言語">上へ</a></td><td width="60%" align="center">44.11. PL/Tclの設定</td><td width="20%" align="right"> <a accesskey="n" href="pltcl-procnames.html" title="44.12. Tclプロシージャ名">次へ</a></td></tr></table><hr /></div><div class="sect1" id="PLTCL-CONFIG"><div class="titlepage"><div><div><h2 class="title" style="clear: both">44.11. PL/Tclの設定</h2></div></div></div><!--
    <title>PL/Tcl Configuration</title>
--><p>
<!--
     This section lists configuration parameters that
     affect <application>PL/Tcl</application>.
-->
この節では、<span class="application">PL/Tcl</span>に影響がある設定パラメータを列挙します。
    </p><div class="variablelist"><dl class="variablelist"><dt id="GUC-PLTCL-START-PROC"><span class="term">
       <code class="varname">pltcl.start_proc</code> (<code class="type">string</code>)
       <a id="id-1.8.9.15.3.1.1.3" class="indexterm"></a>
       <a id="id-1.8.9.15.3.1.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<!--
        This parameter, if set to a nonempty string, specifies the name
        (possibly schema-qualified) of a parameterless PL/Tcl function that
        is to be executed whenever a new Tcl interpreter is created for
        PL/Tcl.  Such a function can perform per-session initialization, such
        as loading additional Tcl code.  A new Tcl interpreter is created
        when a PL/Tcl function is first executed in a database session, or
        when an additional interpreter has to be created because a PL/Tcl
        function is called by a new SQL role.
-->
このパラメータが空文字以外に設定された場合、PL/Tclのための新しいTclインタプリタが作成された際に実行すべきパラメータなしのPL/Tcl関数の名前（スキーマ修飾される場合もあります）を指定します。
そうした関数は、追加のTclコードをロードするような、Tclセッションごとの初期化を実施できます。
データベースセッションの中で新しいPL/Tcl関数が最初に実行された際、あるいはPL/Tcl関数が新しいロールから呼び出されたためにインタプリタを追加で作成しなければならない際に、新しいTclインタプリタが作られます。
       </p><p>
<!--
        The referenced function must be written in the <literal>pltcl</literal>
        language, and must not be marked <literal>SECURITY DEFINER</literal>.
        (These restrictions ensure that it runs in the interpreter it's
        supposed to initialize.)  The current user must have permission to
        call it, too.
-->
参照されている関数は<code class="literal">pltcl</code>言語で記述しなければならず、また<code class="literal">SECURITY DEFINER</code>としてマークされていてはいけません。
（この制約により、その関数が初期化すると想定しているインタプリタ内で実行されることが保証されます。）
また、現在のユーザはその関数を呼び出すことが許可されていなければなりません。
       </p><p>
<!--
        If the function fails with an error it will abort the function call
        that caused the new interpreter to be created and propagate out to
        the calling query, causing the current transaction or subtransaction
        to be aborted.  Any actions already done within Tcl won't be undone;
        however, that interpreter won't be used again.  If the language is
        used again the initialization will be attempted again within a fresh
        Tcl interpreter.
-->
関数がエラーで失敗すると、関数呼び出しをアボートし、その結果新しいインタプリタが作成され、エラーは呼び出し元のクエリに伝搬し、現在のトランザクションあるいはサブトランザクションがアボートします。
Tcl内でそれまでに行われた操作は取り消されません。
しかし、インタプリタは再使用できません。
言語が再び使用されると、新しいTclインタプリタ内で初期化が再び試みられます。
       </p><p>
<!--
        Only superusers can change this setting.  Although this setting
        can be changed within a session, such changes will not affect Tcl
        interpreters that have already been created.
-->
スーパーユーザだけがこの設定を変更できます。
この設定はセッション内で変更できますが、すでに作成されたTclインタプリタには影響しません。
       </p></dd><dt id="GUC-PLTCLU-START-PROC"><span class="term">
       <code class="varname">pltclu.start_proc</code> (<code class="type">string</code>)
       <a id="id-1.8.9.15.3.2.1.3" class="indexterm"></a>
       <a id="id-1.8.9.15.3.2.1.4" class="indexterm"></a>
      </span></dt><dd><p>
<!--
        This parameter is exactly like <varname>pltcl.start_proc</varname>,
        except that it applies to PL/TclU.  The referenced function must
        be written in the <literal>pltclu</literal> language.
-->
このパラメータはPL/TclUに適用される点を除けば、<code class="varname">pltcl.start_proc</code>と完全に類似しています。
参照される関数は<code class="literal">pltclu</code>言語で書かれていなければなりません。
       </p></dd></dl></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="pltcl-transactions.html" title="44.10. トランザクション制御">前へ</a> </td><td width="20%" align="center"><a accesskey="u" href="pltcl.html" title="第44章 PL/Tcl — Tcl手続き言語">上へ</a></td><td width="40%" align="right"> <a accesskey="n" href="pltcl-procnames.html" title="44.12. Tclプロシージャ名">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">44.10. トランザクション制御 </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 15.4文書">ホーム</a></td><td width="40%" align="right" valign="top"> 44.12. Tclプロシージャ名</td></tr></table></div></body></html>